#!/usr/bin/env python3

import sys
from pathlib import Path
from colorama import Fore, init

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É colorama –¥–ª—è –∫–æ–ª—å–æ—Ä–æ–≤–æ–≥–æ –≤–∏–≤–µ–¥–µ–Ω–Ω—è –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª
init(autoreset=True)

# –û—Ç—Ä–∏–º—É—î–º–æ —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
path_color = sys.argv[1]

def add_color_to_dir(path_color, level=0):
    """
    –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º.
    –ü–∞–ø–∫–∏ –≤–∏–≤–æ–¥—è—Ç—å—Å—è —Å–∏–Ω—ñ–º –∫–æ–ª—å–æ—Ä–æ–º, —Ñ–∞–π–ª–∏ ‚Äî –±—ñ–ª–∏–º.
    """
    p = Path(path_color)

    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —ñ—Å–Ω—É—î —à–ª—è—Ö
    if not p.exists():
        print(f"–®–ª—è—Ö –Ω–µ —ñ—Å–Ω—É—î: {p}")
        return
    
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Ü–µ —Å–∞–º–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è, –∞ –Ω–µ —Ñ–∞–π–ª
    if not p.is_dir():
        print(f"–¶–µ –Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è: {p}")
        return

    # –í–∏–≤–æ–¥–∏–º–æ –Ω–∞–∑–≤—É –ø–æ—Ç–æ—á–Ω–æ—ó –ø–∞–ø–∫–∏ —Å–∏–Ω—ñ–º –∫–æ–ª—å–æ—Ä–æ–º
    print('  ' * level + Fore.BLUE + f"üìÇ {p.name}")

    # –ü—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –≤—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç–∞—Ö —É –ø–æ—Ç–æ—á–Ω—ñ–π –ø–∞–ø—Ü—ñ
    for item in p.iterdir():
        if item.is_dir():
            # –Ø–∫—â–æ —Ü–µ –ø—ñ–¥–ø–∞–ø–∫–∞  –≤–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –∑–Ω–æ–≤—É
            add_color_to_dir(item, level + 1)
        else:
            # –Ø–∫—â–æ —Ü–µ —Ñ–∞–π–ª –≤–∏–≤–æ–¥–∏–º–æ –±—ñ–ª–∏–º –∫–æ–ª—å–æ—Ä–æ–º
            print('  ' * (level + 1) + Fore.WHITE + f"üìú {item.name}")

# –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é, –ø–µ—Ä–µ–¥–∞—é—á–∏ —à–ª—è—Ö, –æ—Ç—Ä–∏–º–∞–Ω–∏–π —ñ–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
if __name__ == "__main__":
    import sys
    if len(sys.argv) < 2:
        print("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∫–∞–∂—ñ—Ç—å —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.")
    else:
        add_color_to_dir(sys.argv[1])

